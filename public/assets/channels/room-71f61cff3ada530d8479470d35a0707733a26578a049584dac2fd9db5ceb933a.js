(function(){var e;App.room=App.cable.subscriptions.create({channel:"RoomChannel",room_id:$("#room_id").val(),user_id:$("#user_id").val()},{connected:function(){},disconnected:function(){},received:function(t){return console.log(t),"text_message"===t.type?($("#text_message_table").append(t.message),e()):"entered_message"===t.type?$("#entered_messages").html(t.user_list):void 0},speak:function(e,t,s){return this.perform("speak",{room_id:e,user_id:t,message:s})},pull_user_list:function(e){return this.perform("pull_user_list",{room_id:e})}}),$(document).on("keypress","[data-behavior~=room_speaker]",function(e){if(13===e.keyCode)return App.room.speak($("#room_id").val(),$("#user_id").val(),e.target.value),e.target.value="",e.preventDefault()}),$(document).on("click","#send_message",function(e){return App.room.speak($("#room_id").val(),$("#user_id").val(),$("#input_message").val()),$("#input_message").val(""),e.preventDefault()}),e=function(){return $("#text_messages").animate({scrollTop:$("#text_messages")[0].scrollHeight},"fast")},$(function(){return console.log("test in document.ready"),App.room.pull_user_list($("#room_id").val()),e()})}).call(this);