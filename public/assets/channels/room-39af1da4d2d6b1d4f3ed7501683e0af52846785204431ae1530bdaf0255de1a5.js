(function(){var e,t;App.room=App.cable.subscriptions.create({channel:"RoomChannel",room_id:$("#room_id").val(),user_id:$("#user_id").val()},{connected:function(){return console.log("in connected"),this.pull_user_list($("#room_id").val())},disconnected:function(){return console.log("in disconnected")},received:function(e){return console.log(e),"text_message"===e.type?($("#text_message_table").append(e.DOM_message),t()):"entered_message"===e.type?$("#entered_messages").html(e.DOM_user_list):alert("type not defined:"+e.type)},speak:function(e,t,n){return this.perform("speak",{room_id:e,user_id:t,message_content:n})},pull_user_list:function(e){return console.log("pull_user_list room_id="+e),this.perform("pull_user_list",{room_id:e})},start_hand:function(e,t){return this.perform("start_hand",{room_id:e,user_id:t})}}),$(document).on("keypress","[data-behavior~=room_speaker]",function(e){if(13===e.keyCode)return App.room.speak($("#room_id").val(),$("#user_id").val(),e.target.value),e.target.value="",e.preventDefault()}),$(document).on("click","#send_message",function(e){return App.room.speak($("#room_id").val(),$("#user_id").val(),$("#input_message").val()),$("#input_message").val(""),e.preventDefault()}),$(document).on("click","#start_hand_button",function(e){return App.room.start_hand($("#room_id").val(),$("#user_id").val()),e.preventDefault()}),t=function(){return $("#text_messages").animate({scrollTop:$("#text_messages")[0].scrollHeight},"fast")},e=function(){return console.log("in do_on_document_readay..."),t()},$(function(){return e()})}).call(this);